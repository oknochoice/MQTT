syntax = "proto3";

package chat;

option cc_enable_arenas = true;

message Error {
  uint32 errnum = 1;
  string errmsg = 2;
}

message Noti_Message {
  string nodeID = 1;
  string messageID = 2;
}

message Noti_Unread {
  map<string, uint32> unreadNodes = 1;
}

message UserInfo {
  string id = 1;
  string toNodeID = 2;
  string nickname = 3;
  uint32 unReadMessage = 4;
}

message GroupInfo {
  string id = 1;
  string toNodeID = 2;
  uint32 unReadMessage = 3;
}

message Group {
  enum      Authorize {creator = 0; manager = 1; member = 2;}
  string    id = 1;
  string    toNodeID = 2;
  Authorize authorize = 3;
  string    creatorID = 4;
  repeated  string managerIDs = 5;
  repeated  UserInfo members = 6;
}

message User {
  string    id = 1;
  string    realname = 2;
  string    nickname = 3;
  bytes     icon= 4;
  string    description = 5;
  bool      isMale = 6;
  string    phoneNo = 7;
  string    countryCode = 8;// default is 86
  string    password = 9; // sha1 double
  uint32    birthday = 10;
  repeated  UserInfo friends = 11;
  repeated  string blacklist = 12;
  repeated  GroupInfo groups = 13;
}

message Register {

  string phoneNo = 1;
  string countryCode = 2;// default is 86
  string password = 3; // sha1 double
  string nickname = 4;

}

message Login {

  string iChingOrOther = 1;
  string password = 2; // sha1 double
  string messageVersion = 3;

}

message Logout {

  string phoneNo = 1;
  string countryCode = 2;// default is 86

}

message ChatMessage {
  
  enum   Type { TEXT = 0; JPG = 1; MP3 = 2;}
  string fromUserID = 1;
  string toNodeID = 2;
  uint32 incrementID = 3;
  uint32 totalCount = 4;
  uint32 currentIndex = 5;
  uint32 timestampClient = 6;
  uint32 timestampMessageinsert = 7;
  Type   type = 8;
  bytes  content = 9;
  
}

